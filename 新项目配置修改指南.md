# 新项目修改指南

## 1. 启动类配置

**路径**: 任意模块的启动类

**配置内容**:
```java
@ComponentScan(basePackages = {"com.mos.example"})
@MapperScan("com.mos.example.core.mapper")
```

- Spring Boot 默认只扫描启动类所在包及其子包中的组件
- 在多模块项目中，各模块的包路径相互独立，即使存在依赖关系，Spring 也不会自动扫描依赖项中的包
- 必须显式指定 `@ComponentScan` 来扫描所有业务模块的包路径
- `@MapperScan` 指定 MyBatis Mapper 接口的扫描路径，确保数据访问层能被正确注册

## 2. 全局通用返回结果配置

**路径**: `com.mos.example.common.base.GlobalResponseBodyAdvice`

**配置内容**:
```java
@RestControllerAdvice(basePackages = {"com.mos.example.server.controller"})
```

- `@RestControllerAdvice` 默认会处理所有 `@RestController` 的响应
- 如果不限制扫描范围，会影响到 Swagger/Knife4j 的文档接口（如 `/swagger-ui.html`、`/v3/api-docs` 等）
- 这些接口返回的是 JSON 文档数据，被包装后会导致 Swagger 文档无法正常解析和显示
- 通过指定 `basePackages` 只处理业务控制器，避免干扰文档系统的正常运行

## 3. Swagger 文档包配置

**路径**: `application-{env}.yml` 配置文件中的 `springdoc.group-configs.packages-to-scan`

**配置内容**:
```yaml
springdoc:
  group-configs:
    - group: 'default'
      paths-to-match: '/**'
      packages-to-scan: com.mos.example
```

- Springdoc 需要知道扫描哪些包来生成 API 文档
- 在多模块项目中，Controller 可能分布在不同的模块中（如 `server.controller`、`api.controller`）
- 如果 `packages-to-scan` 配置不完整，会导致部分 Controller 的接口无法在 Swagger 文档中显示
- 配置为顶层包名 `com.mos.example` 可以确保扫描到所有子包中的 Controller
- 同时支持按模块分组配置，便于管理大型项目的 API 文档
